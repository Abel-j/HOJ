(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{492:function(s,e,a){"use strict";a.r(e);var n=a(1),t=Object(n.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"如何备份"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何备份"}},[s._v("#")]),s._v(" 如何备份")]),s._v(" "),a("h3",{attrs:{id:"_1-单体部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-单体部署"}},[s._v("#")]),s._v(" 1. 单体部署")]),s._v(" "),a("p",[s._v("请到"),a("code",[s._v("~/hoj-deploy/standAlone")]),s._v("的目录下，即是与"),a("code",[s._v("docker-compose.yml")]),s._v("的文件同个目录下，该目录下有个叫"),a("code",[s._v("hoj")]),s._v("的文件夹，里面的文件夹介绍如下：")]),s._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[s._v("hoj\n├── file   \t\t# 存储了上传的图片、上传的临时题目数据、markdown引用的文件等文件\n├── judge  \t\t# 存储了每个提交题目的评测过程产生的数据\n├── log    \t\t# 存储了hoj-backend项目的运行日志\n├── testcase    # 存储了题目的评测数据\n└── data        \n    ├── mysql\n    │   ├── data # 存储了MySQL数据库的数据\n    ├── redis\n    │   ├── data # 存储了redis产生的快照数据\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("那么，如果需要备份，只需将该"),a("code",[s._v("hoj")]),s._v("文件夹复制一份即可，在新的机器上重新部署新的hoj的时候，将该文件夹放置与"),a("code",[s._v("docker-compose.yml")]),s._v("一个目录下，使用"),a("code",[s._v("docker-compose up -d")]),s._v("即可启动恢复原来的数据。")]),s._v(" "),a("h3",{attrs:{id:"_2-分布式部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-分布式部署"}},[s._v("#")]),s._v(" 2. 分布式部署")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("主服务器（运行hoj-backend的服务器）")]),s._v(" "),a("p",[s._v("请到"),a("code",[s._v("~/hoj-deploy/distributed/main")]),s._v("的目录下，即是与"),a("code",[s._v("docker-compose.yml")]),s._v("的文件同个目录下，该目录下有个叫"),a("code",[s._v("hoj")]),s._v("的文件夹，里面的文件夹介绍如下：")]),s._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[s._v("hoj\n├── file   \t\t# 存储了上传的图片、上传的临时题目数据、markdown引用的文件等文件\n├── log    \t\t# 存储了hoj-backend项目的运行日志\n├── testcase    # 存储了题目的评测数据\n└── data        \n    ├── mysql\n    │   ├── data # 存储了MySQL数据库的数据\n    ├── redis\n    │   ├── data # 存储了redis产生的快照数据\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("判题服务器（运行hoj-judgeserver的服务器）")]),s._v(" "),a("p",[s._v("请到"),a("code",[s._v("~/hoj-deploy/distributed/judgeserver")]),s._v("的目录下，即是与"),a("code",[s._v("docker-compose.yml")]),s._v("的文件同个目录下，该目录下有个叫"),a("code",[s._v("judge")]),s._v("的文件夹，里面的文件夹介绍如下：")]),s._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[s._v("judge\n├── run  \t\t# 存储了每个提交题目的评测过程产生的数据\n├── log    \t\t# 存储了hoj-judgeserver项目的运行日志\n├── test_case   # 存储了题目的评测数据(每100s从主服务器同步)\n├── spj         # 存储了SPJ的代码\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])]),s._v(" "),a("p",[s._v("那么，主要要备份的还是"),a("strong",[s._v("主服务器")]),s._v("的数据，只需将该"),a("code",[s._v("hoj")]),s._v("文件夹复制一份即可，在新的机器上重新部署新的hoj的时候，将该文件夹放置与"),a("code",[s._v("docker-compose.yml")]),s._v("一个目录下，使用"),a("code",[s._v("docker-compose up -d")]),s._v("即可启动恢复原来的数据。")])])}),[],!1,null,null,null);e.default=t.exports}}]);